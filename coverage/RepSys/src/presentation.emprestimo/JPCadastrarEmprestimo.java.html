<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../.resources/report.gif" type="image/gif"/><title>JPCadastrarEmprestimo.java</title><link rel="stylesheet" href="../../../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../../../.sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">AllTests (10/05/2012 06:09:34)</a> &gt; <a href="../../index.html" class="el_group">RepSys</a> &gt; <a href="../index.html" class="el_bundle">src</a> &gt; <a href="index.html" class="el_package">presentation.emprestimo</a> &gt; <span class="el_source">JPCadastrarEmprestimo.java</span></div><h1>JPCadastrarEmprestimo.java</h1><pre class="source lang-java linenums"><span class="nc" id="L1">/*</span>
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * JPCadastrarEmprestimo.java
 *
 * Created on 08/05/2012, 00:00:36
 */
package presentation.emprestimo;

import business.BusinessException;
import business.BusinessFactory;
import business.impl.Emprestimo;
import business.spec.IEmprestimo;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.GregorianCalendar;
import java.util.LinkedList;
import java.util.List;
import java.util.ResourceBundle;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;
import presentation.conta.JPConsultarConta;
import presentation.desktop.MainWindow;
import presentation.lib.IMultiModePanel.Mode;
import presentation.usuario.JPUsuariosCadastrados;
import vo.EmprestimoUsuarioRelVO;
import vo.EmprestimoVO;
import vo.UsuarioVO;

/**
 *
 * @author Endril
 */
public class JPCadastrarEmprestimo extends javax.swing.JPanel implements presentation.lib.ReturnEvent {

    private List&lt;UsuarioVO&gt; usuarios;
    private UsuarioVO credor;
    /** Creates new form JPCadastrarEmprestimo */
<span class="nc" id="L44">    public JPCadastrarEmprestimo() {</span>
<span class="nc" id="L45">          initComponents();</span>
        try {
<span class="nc" id="L47">            usuarios = BusinessFactory.getInstance().getUsuario().getAll();</span>
<span class="nc" id="L48">            int counter = 0;</span>
<span class="nc" id="L49">            DefaultTableModel model =(DefaultTableModel) jTable1.getModel();</span>
<span class="nc bnc" id="L50" title="All 2 branches missed.">            for (UsuarioVO usuario:usuarios) {</span>
<span class="nc" id="L51">                model.insertRow(counter, new Object[]{false,usuario.getNome(),usuario.getEmail()});</span>
<span class="nc" id="L52">                counter++;</span>
                }
<span class="nc" id="L54">        } catch (BusinessException ex) {</span>
<span class="nc" id="L55">            Logger.getLogger(JPCadastrarEmprestimo.class.getName()).log(Level.SEVERE, null, ex);</span>
        }
        
        //o credor normalmente é o usuario logado
<span class="nc" id="L59">        atualizaCredor(MainWindow.getInstance().getUsuarioLogado());</span>
      
<span class="nc" id="L61">    }</span>
    
    private void atualizaCredor(UsuarioVO novoCredor)
    {
<span class="nc" id="L65">         credor = novoCredor;</span>
<span class="nc" id="L66">         jTextField5.setText(credor.getNome());</span>
<span class="nc" id="L67">    }</span>

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot;Generated Code&quot;&gt;//GEN-BEGIN:initComponents
    private void initComponents() {

<span class="nc" id="L78">        jLabel1 = new javax.swing.JLabel();</span>
<span class="nc" id="L79">        jButton2 = new javax.swing.JButton();</span>
<span class="nc" id="L80">        jSeparator1 = new javax.swing.JSeparator();</span>
<span class="nc" id="L81">        jPanel1 = new javax.swing.JPanel();</span>
<span class="nc" id="L82">        jLabel2 = new javax.swing.JLabel();</span>
<span class="nc" id="L83">        jLabel2.setVisible(false);</span>
<span class="nc" id="L84">        jLabel3 = new javax.swing.JLabel();</span>
<span class="nc" id="L85">        jLabel4 = new javax.swing.JLabel();</span>
<span class="nc" id="L86">        jLabel8 = new javax.swing.JLabel();</span>
<span class="nc" id="L87">        jLabel14 = new javax.swing.JLabel();</span>
<span class="nc" id="L88">        jTextField5 = new javax.swing.JTextField();</span>
<span class="nc" id="L89">        jButton5 = new javax.swing.JButton();</span>
<span class="nc" id="L90">        jScrollPane3 = new javax.swing.JScrollPane();</span>
<span class="nc" id="L91">        jTextArea2 = new javax.swing.JTextArea();</span>
<span class="nc" id="L92">        jFormattedTextField1 = new javax.swing.JFormattedTextField();</span>
<span class="nc" id="L93">        jPanel2 = new javax.swing.JPanel();</span>
<span class="nc" id="L94">        jLabel15 = new javax.swing.JLabel();</span>
<span class="nc" id="L95">        jScrollPane1 = new javax.swing.JScrollPane();</span>
<span class="nc" id="L96">        jTable1 = new javax.swing.JTable();</span>
<span class="nc" id="L97">        jCheckBox1 = new javax.swing.JCheckBox();</span>
<span class="nc" id="L98">        jButton3 = new javax.swing.JButton();</span>
<span class="nc" id="L99">        jSeparator2 = new javax.swing.JSeparator();</span>

<span class="nc" id="L101">        jLabel1.setFont(new java.awt.Font(&quot;Cambria&quot;, 1, 30));</span>
<span class="nc" id="L102">        java.util.ResourceBundle bundle = java.util.ResourceBundle.getBundle(&quot;I18n/Bundle&quot;); // NOI18N</span>
<span class="nc" id="L103">        jLabel1.setText(bundle.getString(&quot;JPCadastrarEmprestimo.jLabel1.text_1&quot;)); // NOI18N</span>

<span class="nc" id="L105">        jButton2.setFont(new java.awt.Font(&quot;Calibri&quot;, 1, 12)); // NOI18N</span>
<span class="nc" id="L106">        jButton2.setText(bundle.getString(&quot;JPCadastrarEmprestimo.jButton2.text_1&quot;)); // NOI18N</span>
<span class="nc" id="L107">        jButton2.addActionListener(new java.awt.event.ActionListener() {</span>
            public void actionPerformed(java.awt.event.ActionEvent evt) {
<span class="nc" id="L109">                jButton2ActionPerformed(evt);</span>
<span class="nc" id="L110">            }</span>
        });

<span class="nc" id="L113">        jLabel2.setFont(new java.awt.Font(&quot;Cambria&quot;, 3, 18)); // NOI18N</span>
<span class="nc" id="L114">        jLabel2.setText(bundle.getString(&quot;JPCadastrarEmprestimo.jLabel2.text_1&quot;)); // NOI18N</span>

<span class="nc" id="L116">        jLabel3.setFont(new java.awt.Font(&quot;Calibri&quot;, 3, 18));</span>
<span class="nc" id="L117">        jLabel3.setText(bundle.getString(&quot;JPCadastrarEmprestimo.jLabel3.text_1&quot;)); // NOI18N</span>

<span class="nc" id="L119">        jLabel4.setFont(new java.awt.Font(&quot;Calibri&quot;, 3, 18));</span>
<span class="nc" id="L120">        jLabel4.setText(bundle.getString(&quot;JPCadastrarEmprestimo.jLabel4.text_1&quot;)); // NOI18N</span>

<span class="nc" id="L122">        jLabel8.setFont(new java.awt.Font(&quot;Cambria&quot;, 3, 18));</span>
<span class="nc" id="L123">        jLabel8.setText(bundle.getString(&quot;JPCadastrarEmprestimo.jLabel8.text_1&quot;)); // NOI18N</span>

<span class="nc" id="L125">        jLabel14.setFont(new java.awt.Font(&quot;Calibri&quot;, 3, 18));</span>
<span class="nc" id="L126">        jLabel14.setText(bundle.getString(&quot;JPCadastrarEmprestimo.jLabel14.text&quot;)); // NOI18N</span>

<span class="nc" id="L128">        jTextField5.setEditable(false);</span>
<span class="nc" id="L129">        jTextField5.setFont(new java.awt.Font(&quot;Catriel&quot;, 0, 11)); // NOI18N</span>
<span class="nc" id="L130">        jTextField5.setEnabled(false);</span>
<span class="nc" id="L131">        jTextField5.addActionListener(new java.awt.event.ActionListener() {</span>
            public void actionPerformed(java.awt.event.ActionEvent evt) {
<span class="nc" id="L133">                jTextField5ActionPerformed(evt);</span>
<span class="nc" id="L134">            }</span>
        });

<span class="nc" id="L137">        jButton5.setText(bundle.getString(&quot;JPCadastrarEmprestimo.jButton5.text&quot;)); // NOI18N</span>
<span class="nc" id="L138">        jButton5.addActionListener(new java.awt.event.ActionListener() {</span>
            public void actionPerformed(java.awt.event.ActionEvent evt) {
<span class="nc" id="L140">                jButton5ActionPerformed(evt);</span>
<span class="nc" id="L141">            }</span>
        });

<span class="nc" id="L144">        jTextArea2.setColumns(20);</span>
<span class="nc" id="L145">        jTextArea2.setLineWrap(true);</span>
<span class="nc" id="L146">        jTextArea2.setRows(3);</span>
<span class="nc" id="L147">        jScrollPane3.setViewportView(jTextArea2);</span>

<span class="nc" id="L149">        jFormattedTextField1.setText(&quot;0.0&quot;);</span>

<span class="nc" id="L151">        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);</span>
<span class="nc" id="L152">        jPanel1.setLayout(jPanel1Layout);</span>
<span class="nc" id="L153">        jPanel1Layout.setHorizontalGroup(</span>
<span class="nc" id="L154">            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L155">            .addGroup(jPanel1Layout.createSequentialGroup()</span>
<span class="nc" id="L156">                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L157">                    .addGroup(jPanel1Layout.createSequentialGroup()</span>
<span class="nc" id="L158">                        .addComponent(jLabel14)</span>
<span class="nc" id="L159">                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)</span>
<span class="nc" id="L160">                        .addComponent(jTextField5, javax.swing.GroupLayout.DEFAULT_SIZE, 324, Short.MAX_VALUE)</span>
<span class="nc" id="L161">                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)</span>
<span class="nc" id="L162">                        .addComponent(jButton5, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE))</span>
<span class="nc" id="L163">                    .addGroup(jPanel1Layout.createSequentialGroup()</span>
<span class="nc" id="L164">                        .addComponent(jLabel8)</span>
<span class="nc" id="L165">                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 213, Short.MAX_VALUE)</span>
<span class="nc" id="L166">                        .addComponent(jLabel2))</span>
<span class="nc" id="L167">                    .addGroup(jPanel1Layout.createSequentialGroup()</span>
<span class="nc" id="L168">                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L169">                            .addComponent(jLabel4)</span>
<span class="nc" id="L170">                            .addComponent(jLabel3))</span>
<span class="nc" id="L171">                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)</span>
<span class="nc" id="L172">                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L173">                            .addComponent(jFormattedTextField1, javax.swing.GroupLayout.DEFAULT_SIZE, 391, Short.MAX_VALUE)</span>
<span class="nc" id="L174">                            .addComponent(jScrollPane3, javax.swing.GroupLayout.DEFAULT_SIZE, 391, Short.MAX_VALUE))))</span>
<span class="nc" id="L175">                .addContainerGap())</span>
        );
<span class="nc" id="L177">        jPanel1Layout.setVerticalGroup(</span>
<span class="nc" id="L178">            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L179">            .addGroup(jPanel1Layout.createSequentialGroup()</span>
<span class="nc" id="L180">                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)</span>
<span class="nc" id="L181">                    .addComponent(jLabel8)</span>
<span class="nc" id="L182">                    .addComponent(jLabel2))</span>
<span class="nc" id="L183">                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)</span>
<span class="nc" id="L184">                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L185">                    .addGroup(jPanel1Layout.createSequentialGroup()</span>
<span class="nc" id="L186">                        .addComponent(jScrollPane3, javax.swing.GroupLayout.PREFERRED_SIZE, 69, javax.swing.GroupLayout.PREFERRED_SIZE)</span>
<span class="nc" id="L187">                        .addGap(18, 18, 18)</span>
<span class="nc" id="L188">                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)</span>
<span class="nc" id="L189">                            .addComponent(jLabel3)</span>
<span class="nc" id="L190">                            .addComponent(jFormattedTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))</span>
<span class="nc" id="L191">                    .addComponent(jLabel4))</span>
<span class="nc" id="L192">                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)</span>
<span class="nc" id="L193">                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)</span>
<span class="nc" id="L194">                    .addComponent(jLabel14)</span>
<span class="nc" id="L195">                    .addComponent(jTextField5, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)</span>
<span class="nc" id="L196">                    .addComponent(jButton5))</span>
<span class="nc" id="L197">                .addContainerGap(38, Short.MAX_VALUE))</span>
        );

<span class="nc" id="L200">        jLabel15.setFont(new java.awt.Font(&quot;Calibri&quot;, 3, 18));</span>
<span class="nc" id="L201">        jLabel15.setText(bundle.getString(&quot;JPCadastrarEmprestimo.jLabel15.text&quot;)); // NOI18N</span>

<span class="nc" id="L203">        jTable1.setModel(new javax.swing.table.DefaultTableModel(</span>
<span class="nc" id="L204">            new Object [][] {</span>

            },
<span class="nc" id="L207">            new String [] {</span>
<span class="nc" id="L208">                &quot;&quot;, &quot;&quot;, &quot;&quot;</span>
            }
        ) {
<span class="nc" id="L211">            Class[] types = new Class [] {</span>
<span class="nc" id="L212">                java.lang.Boolean.class, java.lang.String.class, java.lang.String.class</span>
            };
<span class="nc" id="L214">            boolean[] canEdit = new boolean [] {</span>
<span class="nc" id="L215">                true, false, false</span>
            };

            public Class getColumnClass(int columnIndex) {
<span class="nc" id="L219">                return types [columnIndex];</span>
            }

            public boolean isCellEditable(int rowIndex, int columnIndex) {
<span class="nc" id="L223">                return canEdit [columnIndex];</span>
            }
        });
<span class="nc" id="L226">        jTable1.getTableHeader().setReorderingAllowed(false);</span>
<span class="nc" id="L227">        jScrollPane1.setViewportView(jTable1);</span>
<span class="nc" id="L228">        jTable1.getColumnModel().getColumn(0).setResizable(false);</span>
<span class="nc" id="L229">        jTable1.getColumnModel().getColumn(0).setPreferredWidth(20);</span>
<span class="nc" id="L230">        jTable1.getColumnModel().getColumn(0).setHeaderValue(bundle.getString(&quot;JPCadastrarEmprestimo.jTable1.columnModel.title0&quot;)); // NOI18N</span>
<span class="nc" id="L231">        jTable1.getColumnModel().getColumn(1).setResizable(false);</span>
<span class="nc" id="L232">        jTable1.getColumnModel().getColumn(1).setHeaderValue(bundle.getString(&quot;JPCadastrarEmprestimo.jTable1.columnModel.title1&quot;)); // NOI18N</span>
<span class="nc" id="L233">        jTable1.getColumnModel().getColumn(2).setResizable(false);</span>
<span class="nc" id="L234">        jTable1.getColumnModel().getColumn(2).setHeaderValue(bundle.getString(&quot;JPCadastrarEmprestimo.jTable1.columnModel.title2&quot;)); // NOI18N</span>

<span class="nc" id="L236">        jCheckBox1.setFont(new java.awt.Font(&quot;Cambria&quot;, 2, 12)); // NOI18N</span>
<span class="nc" id="L237">        jCheckBox1.setText(bundle.getString(&quot;JPCadastrarEmprestimo.jCheckBox1.text_1&quot;)); // NOI18N</span>
<span class="nc" id="L238">        jCheckBox1.setVisible(false);</span>
<span class="nc" id="L239">        jCheckBox1.addActionListener(new java.awt.event.ActionListener() {</span>
            public void actionPerformed(java.awt.event.ActionEvent evt) {
<span class="nc" id="L241">                jCheckBox1ActionPerformed(evt);</span>
<span class="nc" id="L242">            }</span>
        });

<span class="nc" id="L245">        jButton3.setFont(new java.awt.Font(&quot;Calibri&quot;, 1, 12)); // NOI18N</span>
<span class="nc" id="L246">        jButton3.setText(bundle.getString(&quot;JPCadastrarEmprestimo.jButton3.text&quot;)); // NOI18N</span>
<span class="nc" id="L247">        jButton3.addActionListener(new java.awt.event.ActionListener() {</span>
            public void actionPerformed(java.awt.event.ActionEvent evt) {
<span class="nc" id="L249">                jButton3ActionPerformed(evt);</span>
<span class="nc" id="L250">            }</span>
        });

<span class="nc" id="L253">        javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);</span>
<span class="nc" id="L254">        jPanel2.setLayout(jPanel2Layout);</span>
<span class="nc" id="L255">        jPanel2Layout.setHorizontalGroup(</span>
<span class="nc" id="L256">            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L257">            .addGroup(jPanel2Layout.createSequentialGroup()</span>
<span class="nc" id="L258">                .addComponent(jLabel15)</span>
<span class="nc" id="L259">                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)</span>
<span class="nc" id="L260">                .addComponent(jCheckBox1)</span>
<span class="nc" id="L261">                .addContainerGap(154, Short.MAX_VALUE))</span>
<span class="nc" id="L262">            .addGroup(jPanel2Layout.createSequentialGroup()</span>
<span class="nc" id="L263">                .addGap(10, 10, 10)</span>
<span class="nc" id="L264">                .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 547, Short.MAX_VALUE))</span>
<span class="nc" id="L265">            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel2Layout.createSequentialGroup()</span>
<span class="nc" id="L266">                .addContainerGap()</span>
<span class="nc" id="L267">                .addComponent(jButton3))</span>
        );
<span class="nc" id="L269">        jPanel2Layout.setVerticalGroup(</span>
<span class="nc" id="L270">            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L271">            .addGroup(jPanel2Layout.createSequentialGroup()</span>
<span class="nc" id="L272">                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)</span>
<span class="nc" id="L273">                    .addComponent(jLabel15)</span>
<span class="nc" id="L274">                    .addComponent(jCheckBox1))</span>
<span class="nc" id="L275">                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)</span>
<span class="nc" id="L276">                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 132, javax.swing.GroupLayout.PREFERRED_SIZE)</span>
<span class="nc" id="L277">                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 25, Short.MAX_VALUE)</span>
<span class="nc" id="L278">                .addComponent(jButton3))</span>
        );

<span class="nc" id="L281">        jSeparator2.setOrientation(javax.swing.SwingConstants.VERTICAL);</span>

<span class="nc" id="L283">        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);</span>
<span class="nc" id="L284">        this.setLayout(layout);</span>
<span class="nc" id="L285">        layout.setHorizontalGroup(</span>
<span class="nc" id="L286">            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L287">            .addGroup(layout.createSequentialGroup()</span>
<span class="nc" id="L288">                .addContainerGap()</span>
<span class="nc" id="L289">                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L290">                    .addComponent(jSeparator1, javax.swing.GroupLayout.DEFAULT_SIZE, 1101, Short.MAX_VALUE)</span>
<span class="nc" id="L291">                    .addComponent(jLabel1)</span>
<span class="nc" id="L292">                    .addGroup(layout.createSequentialGroup()</span>
<span class="nc" id="L293">                        .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)</span>
<span class="nc" id="L294">                        .addGap(14, 14, 14)</span>
<span class="nc" id="L295">                        .addComponent(jSeparator2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)</span>
<span class="nc" id="L296">                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)</span>
<span class="nc" id="L297">                        .addComponent(jPanel2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))</span>
<span class="nc" id="L298">                    .addComponent(jButton2, javax.swing.GroupLayout.Alignment.TRAILING))</span>
<span class="nc" id="L299">                .addContainerGap())</span>
        );
<span class="nc" id="L301">        layout.setVerticalGroup(</span>
<span class="nc" id="L302">            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L303">            .addGroup(layout.createSequentialGroup()</span>
<span class="nc" id="L304">                .addComponent(jLabel1)</span>
<span class="nc" id="L305">                .addGap(10, 10, 10)</span>
<span class="nc" id="L306">                .addComponent(jSeparator1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)</span>
<span class="nc" id="L307">                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)</span>
<span class="nc" id="L308">                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)</span>
<span class="nc" id="L309">                    .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)</span>
<span class="nc" id="L310">                    .addComponent(jPanel2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)</span>
<span class="nc" id="L311">                    .addComponent(jSeparator2, javax.swing.GroupLayout.DEFAULT_SIZE, 211, Short.MAX_VALUE))</span>
<span class="nc" id="L312">                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 46, Short.MAX_VALUE)</span>
<span class="nc" id="L313">                .addComponent(jButton2)</span>
<span class="nc" id="L314">                .addGap(20, 20, 20))</span>
        );
<span class="nc" id="L316">    }// &lt;/editor-fold&gt;//GEN-END:initComponents</span>

private void jTextField5ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jTextField5ActionPerformed
// TODO add your handling code here:
<span class="nc" id="L320">}//GEN-LAST:event_jTextField5ActionPerformed</span>

private void jCheckBox1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jCheckBox1ActionPerformed
// TODO add your handling code here:
<span class="nc" id="L324">}//GEN-LAST:event_jCheckBox1ActionPerformed</span>

    private void jButton5ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton5ActionPerformed
<span class="nc" id="L327">        JPUsuariosCadastrados jpcu = new JPUsuariosCadastrados();</span>
<span class="nc" id="L328">        jpcu.setMode(Mode.SELECIONAVEL);</span>
<span class="nc" id="L329">        MainWindow.getInstance().showCard(this, jpcu);</span>
        
<span class="nc" id="L331">    }//GEN-LAST:event_jButton5ActionPerformed</span>

    private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton3ActionPerformed
<span class="nc" id="L334">        ResourceBundle bundle = ResourceBundle.getBundle(&quot;I18n/Bundle&quot;);</span>
        

<span class="nc" id="L337">        double valor = Double.valueOf(jFormattedTextField1.getText()).doubleValue();</span>
<span class="nc bnc" id="L338" title="All 2 branches missed.">        if(valor &gt; 0)</span>
        {
<span class="nc" id="L340">            int contagem = 0;</span>
<span class="nc" id="L341">            EmprestimoVO emp = new EmprestimoVO(new GregorianCalendar(),valor,jTextArea2.getText());</span>
            //credor
<span class="nc" id="L343">            EmprestimoUsuarioRelVO ucredor =  new EmprestimoUsuarioRelVO(emp,credor);</span>
            //devedores
<span class="nc" id="L345">            List&lt;EmprestimoUsuarioRelVO&gt; udevedores = new LinkedList&lt;EmprestimoUsuarioRelVO&gt;();</span>
            
            //verificando que o valor é valido, basta cadastrar empréstimos no sistema
<span class="nc bnc" id="L348" title="All 2 branches missed.">            for(int i =0; i &lt; jTable1.getRowCount(); i++)</span>
            {
<span class="nc bnc" id="L350" title="All 2 branches missed.">                if((Boolean) jTable1.getValueAt(i, 0))</span>
                {
<span class="nc" id="L352">                    udevedores.add(new EmprestimoUsuarioRelVO(emp,usuarios.get(i)));</span>
<span class="nc" id="L353">                    contagem++;</span>
                }
            }
<span class="nc bnc" id="L356" title="All 2 branches missed.">            if(contagem &gt; 0)</span>
            {
                //define o valor do emprestimp
                //emp.setValor(valor/contagem);
                
<span class="nc" id="L361">                IEmprestimo e = BusinessFactory.getInstance().getEmprestimo();</span>
                try {
<span class="nc" id="L363">                    e.create(emp);</span>
<span class="nc" id="L364">                    e.createCredor(ucredor);</span>
<span class="nc" id="L365">                    e.createDevedores(udevedores);</span>
<span class="nc" id="L366">                } catch (BusinessException ex) {</span>
<span class="nc" id="L367">                    Logger.getLogger(JPCadastrarEmprestimo.class.getName()).log(Level.SEVERE, null, ex);</span>
                }
<span class="nc" id="L369">                 MainWindow.getInstance().closeCurrentCard();</span>
               
 
            } else {
<span class="nc" id="L373">                JOptionPane.showMessageDialog(MainWindow.getInstance(),</span>
<span class="nc" id="L374">                            bundle.getString(&quot;JPCadastrarEmprestimo.Messages.ErrorTitle&quot;),   </span>
<span class="nc" id="L375">                            bundle.getString(&quot;JPCadastrarEmprestimo.Messages.NoUsers&quot;),</span>
                           
<span class="nc" id="L377">                            JOptionPane.WARNING_MESSAGE);               </span>
            }
        } else {
<span class="nc" id="L380">            JOptionPane.showMessageDialog(MainWindow.getInstance(),</span>
<span class="nc" id="L381">                            bundle.getString(&quot;JPCadastrarEmprestimo.Messages.ErrorTitle&quot;),</span>
<span class="nc" id="L382">                            bundle.getString(&quot;JPCadastrarEmprestimo.Messages.InvalidValue&quot;),</span>
                            
<span class="nc" id="L384">                            JOptionPane.WARNING_MESSAGE);</span>
        }

        
        
       
<span class="nc" id="L390">    }//GEN-LAST:event_jButton3ActionPerformed</span>

    private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton2ActionPerformed
<span class="nc" id="L393">        MainWindow.getInstance().closeCurrentCard();</span>
<span class="nc" id="L394">    }//GEN-LAST:event_jButton2ActionPerformed</span>

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton jButton2;
    private javax.swing.JButton jButton3;
    private javax.swing.JButton jButton5;
    private javax.swing.JCheckBox jCheckBox1;
    private javax.swing.JFormattedTextField jFormattedTextField1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel14;
    private javax.swing.JLabel jLabel15;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane3;
    private javax.swing.JSeparator jSeparator1;
    private javax.swing.JSeparator jSeparator2;
    private javax.swing.JTable jTable1;
    private javax.swing.JTextArea jTextArea2;
    private javax.swing.JTextField jTextField5;
    // End of variables declaration//GEN-END:variables

    //private javax.swing.
    
    public void onReturnFromOtherWindow(Object returnedObject) {
       //se o valor retornado for um usuario ( consulta de usuarios )
<span class="nc bnc" id="L424" title="All 2 branches missed.">       if(returnedObject instanceof UsuarioVO)</span>
       {
<span class="nc" id="L426">           atualizaCredor((UsuarioVO)returnedObject);</span>
       }
<span class="nc" id="L428">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.5.6.201201232323</span>AllTests (10/05/2012 06:09:34)</div></body></html>